ends_image = (ends_image+0.333) mod 2;
image = (image+0.125) mod 2;
